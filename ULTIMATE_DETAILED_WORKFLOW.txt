â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                    ğŸ¯ ULTIMATE DETAILED CAMPAIGN WORKFLOW                                                               â•‘
â•‘                                      Complete Technical Documentation                                                                    â•‘
â•‘                                    Every API Call, Database Query, User Action                                                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                               PHASE 1: STAFF DISCOVERY                                                                â•‘
â•‘                                            ğŸ” Complete Technical Flow                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ 1.1: STAFF LOGIN & AUTHENTICATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ” CLERK AUTHENTICATION                                                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Frontend: /staff/discovery/page.tsx (Line 1-50)                                                                                    â”‚  â”‚
â”‚  â”‚ â€¢ useUser() hook checks authentication                                                                                             â”‚  â”‚
â”‚  â”‚ â€¢ useUserRole() verifies STAFF/ADMIN role                                                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Middleware: /src/middleware.ts validates protected route                                                                         â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ API Calls:                                                                                                                          â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/users - Verify user exists in database                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ Database Query: SELECT * FROM users WHERE clerk_id = $1 AND role IN ('STAFF', 'ADMIN')                                         â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Session Management:                                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Clerk session token validation                                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Role-based access control enforcement                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Security headers applied via middleware                                                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 1.2: DISCOVERY PAGE INITIALIZATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ“Š COMPONENT MOUNTING & STATE SETUP                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Component: DiscoveryPageClient() - Line 2232-3438                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ State Initialization:                                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ const [searchResults, setSearchResults] = useState([])                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ const [filters, setFilters] = useState(defaultFilters)                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ const [selectedInfluencer, setSelectedInfluencer] = useState(null)                                                               â”‚  â”‚
â”‚  â”‚ â€¢ const [isPopupOpen, setIsPopupOpen] = useState(false)                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ const [loading, setLoading] = useState(false)                                                                                    â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Context Setup:                                                                                                                     â”‚  â”‚
â”‚  â”‚ â€¢ HeartedInfluencersProvider - Manages saved influencers state                                                                     â”‚  â”‚
â”‚  â”‚ â€¢ const { heartedInfluencers, toggleHeart } = useHeartedInfluencers()                                                              â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Initial API Calls:                                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/discovery/credits - Check available Modash credits                                                                      â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/staff/saved-influencers - Load previously saved influencers                                                             â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Database Queries on Mount:                                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ SELECT * FROM staff_saved_influencers WHERE saved_by = $1 ORDER BY created_at DESC                                              â”‚  â”‚
â”‚  â”‚ â€¢ SELECT credits_used, credits_remaining FROM modash_usage WHERE month = CURRENT_MONTH                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 1.3: MODASH SEARCH EXECUTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ” ADVANCED SEARCH WITH FILTERS                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User Action: Staff clicks "Search" button                                                                                          â”‚  â”‚
â”‚  â”‚ Frontend Handler: handleSearch() - Line 2431                                                                                       â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Search Request Processing:                                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ Validate search parameters                                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Build filter object with all selected criteria                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Set loading state to true                                                                                                        â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ API Call: POST /api/discovery/search                                                                                               â”‚  â”‚
â”‚  â”‚ Request Body:                                                                                                                      â”‚  â”‚
â”‚  â”‚ {                                                                                                                                  â”‚  â”‚
â”‚  â”‚   platform: "instagram",                                                                                                          â”‚  â”‚
â”‚  â”‚   followersMin: 10000,                                                                                                            â”‚  â”‚
â”‚  â”‚   followersMax: 1000000,                                                                                                          â”‚  â”‚
â”‚  â”‚   engagementRate: 2.5,                                                                                                            â”‚  â”‚
â”‚  â”‚   locationCountries: ["GB", "US"],                                                                                                â”‚  â”‚
â”‚  â”‚   audienceGender: { female: 60, male: 40 },                                                                                       â”‚  â”‚
â”‚  â”‚   audienceAge: { "18-24": 40, "25-34": 35 }                                                                                       â”‚  â”‚
â”‚  â”‚ }                                                                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Backend Processing: /src/app/api/discovery/search/route.ts                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ Validate request parameters                                                                                                      â”‚  â”‚
â”‚  â”‚ â€¢ Check user permissions and credit availability                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Route to appropriate search method (simple vs complex filters)                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 1.4: MODASH API INTEGRATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸŒ EXTERNAL API COMMUNICATION                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Service: /src/lib/services/modash.ts                                                                                               â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Primary Search API Call:                                                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ URL: https://api.modash.io/v1/instagram/search                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Method: POST                                                                                                                     â”‚  â”‚
â”‚  â”‚ â€¢ Headers: Authorization: Bearer ${MODASH_API_KEY}                                                                                 â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Search Parameters Sent:                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ audience_geo: ["GB", "US"]                                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ followers: { min: 10000, max: 1000000 }                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ engagement_rate: { min: 2.5 }                                                                                                    â”‚  â”‚
â”‚  â”‚ â€¢ audience_gender: { female: 60, male: 40 }                                                                                        â”‚  â”‚
â”‚  â”‚ â€¢ audience_age: { "18-24": 40, "25-34": 35 }                                                                                      â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Response Processing:                                                                                                               â”‚  â”‚
â”‚  â”‚ â€¢ Parse JSON response from Modash                                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ Extract user list with basic metrics                                                                                             â”‚  â”‚
â”‚  â”‚ â€¢ Handle pagination if more than 50 results                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Error handling for API failures/rate limits                                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Enhanced Data Fetching:                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ For each user: GET /instagram/profile/{userId}/report                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Fetch complete analytics package                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Extract engagement rates, demographics, content samples                                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Credit usage: 1 credit per profile report                                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 1.5: DATABASE STORAGE & ENRICHMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ’¾ COMPREHENSIVE DATA STORAGE                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Database Operations: /src/lib/db/queries/discovery.ts                                                                              â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 1. Store Search Query:                                                                                                             â”‚  â”‚
â”‚  â”‚ INSERT INTO discovery_searches (                                                                                                   â”‚  â”‚
â”‚  â”‚   user_id, platform, filters_used, results_count,                                                                                 â”‚  â”‚
â”‚  â”‚   credits_used, search_timestamp                                                                                                   â”‚  â”‚
â”‚  â”‚ ) VALUES ($1, $2, $3, $4, $5, NOW())                                                                                               â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 2. Store Each Discovered Influencer:                                                                                               â”‚  â”‚
â”‚  â”‚ INSERT INTO discovered_influencers (                                                                                               â”‚  â”‚
â”‚  â”‚   username, platform, followers, engagement_rate,                                                                                 â”‚  â”‚
â”‚  â”‚   modash_user_id, demographics, modash_data,                                                                                      â”‚  â”‚
â”‚  â”‚   discovered_by, discovered_at                                                                                                     â”‚  â”‚
â”‚  â”‚ ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, NOW())                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 3. Check Against Existing Roster:                                                                                                  â”‚  â”‚
â”‚  â”‚ SELECT COUNT(*) FROM influencers i                                                                                                 â”‚  â”‚
â”‚  â”‚ JOIN influencer_platforms ip ON i.id = ip.influencer_id                                                                           â”‚  â”‚
â”‚  â”‚ WHERE ip.username = $1 AND ip.platform = $2                                                                                       â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 4. Update Discovery Statistics:                                                                                                    â”‚  â”‚
â”‚  â”‚ INSERT INTO discovery_stats (                                                                                                      â”‚  â”‚
â”‚  â”‚   date, total_searches, total_discovered,                                                                                         â”‚  â”‚
â”‚  â”‚   credits_used, unique_influencers                                                                                                â”‚  â”‚
â”‚  â”‚ ) VALUES (CURRENT_DATE, 1, $1, $2, $3)                                                                                            â”‚  â”‚
â”‚  â”‚ ON CONFLICT (date) DO UPDATE SET                                                                                                   â”‚  â”‚
â”‚  â”‚   total_searches = discovery_stats.total_searches + 1,                                                                            â”‚  â”‚
â”‚  â”‚   total_discovered = discovery_stats.total_discovered + $1                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 1.6: RESULTS DISPLAY & INTERACTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ“Š FRONTEND RESULTS RENDERING                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Component Updates: DiscoveryPageClient - Search Results Section                                                                    â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ State Updates:                                                                                                                     â”‚  â”‚
â”‚  â”‚ â€¢ setSearchResults(enrichedResults)                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ setLoading(false)                                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ setSearchPerformed(true)                                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ setCreditsUsed(creditsUsed)                                                                                                      â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Results Grid Rendering:                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Map through searchResults array                                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ Render InfluencerCard for each result                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Display: Profile pic, username, followers, engagement                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Show "In Roster" badge if already exists                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ Add heart button for saving                                                                                                      â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Interactive Elements:                                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ Click card â†’ Open detailed popup                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Click heart â†’ Save to staff_saved_influencers                                                                                    â”‚  â”‚
â”‚  â”‚ â€¢ Click "Add to Roster" â†’ Full influencer creation                                                                                 â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Real-time Updates:                                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Heart state managed via context                                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ Roster status checks on card interactions                                                                                        â”‚  â”‚
â”‚  â”‚ â€¢ Credit counter updates in real-time                                                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                               PHASE 2: BRAND SHORTLISTING                                                             â•‘
â•‘                                            ğŸ‘¥ Complete Technical Flow                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ 2.1: BRAND AUTHENTICATION & ACCESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ” BRAND PORTAL ENTRY                                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route: /brand/influencers                                                                                                          â”‚  â”‚
â”‚  â”‚ Component: /src/app/brand/influencers/page.tsx                                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Authentication Check:                                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ BrandProtectedRoute wrapper component                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ useUser() hook validates Clerk session                                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ Role verification: user.publicMetadata.role === 'BRAND'                                                                         â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Onboarding Check:                                                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ API Call: GET /api/onboarding-status                                                                                             â”‚  â”‚
â”‚  â”‚ â€¢ Database Query: SELECT is_onboarded FROM user_profiles WHERE user_id = $1                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Redirect to /brand/onboarding if not completed                                                                                   â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Brand Data Loading:                                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ Fetch brand profile and preferences                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ Load existing shortlists                                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ Initialize filtering preferences                                                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 2.2: INFLUENCER ROSTER BROWSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ” CURATED INFLUENCER DISCOVERY                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ API Call: GET /api/influencers                                                                                                      â”‚  â”‚
â”‚  â”‚ Backend: /src/lib/db/queries/influencers.ts - getInfluencers()                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Complex Database Query:                                                                                                            â”‚  â”‚
â”‚  â”‚ SELECT                                                                                                                             â”‚  â”‚
â”‚  â”‚   i.id, i.display_name, i.niches, i.total_followers,                                                                              â”‚  â”‚
â”‚  â”‚   i.total_engagement_rate, i.total_avg_views,                                                                                     â”‚  â”‚
â”‚  â”‚   i.estimated_promotion_views, i.price_per_post,                                                                                  â”‚  â”‚
â”‚  â”‚   up.first_name, up.last_name, up.avatar_url,                                                                                     â”‚  â”‚
â”‚  â”‚   up.location_country, up.bio,                                                                                                    â”‚  â”‚
â”‚  â”‚   ARRAY_AGG(DISTINCT ip.platform) as platforms,                                                                                   â”‚  â”‚
â”‚  â”‚   COUNT(DISTINCT ip.platform) as platform_count                                                                                   â”‚  â”‚
â”‚  â”‚ FROM influencers i                                                                                                                 â”‚  â”‚
â”‚  â”‚ JOIN users u ON i.user_id = u.id                                                                                                  â”‚  â”‚
â”‚  â”‚ JOIN user_profiles up ON u.id = up.user_id                                                                                        â”‚  â”‚
â”‚  â”‚ LEFT JOIN influencer_platforms ip ON i.id = ip.influencer_id                                                                      â”‚  â”‚
â”‚  â”‚ WHERE i.is_active = true AND i.ready_for_campaigns = true                                                                         â”‚  â”‚
â”‚  â”‚ GROUP BY i.id, up.first_name, up.last_name, up.avatar_url                                                                         â”‚  â”‚
â”‚  â”‚ ORDER BY i.total_followers DESC                                                                                                    â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Filtering Logic (if filters applied):                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ WHERE i.niches && $1 (niche filter)                                                                                             â”‚  â”‚
â”‚  â”‚ â€¢ AND i.total_followers BETWEEN $2 AND $3                                                                                         â”‚  â”‚
â”‚  â”‚ â€¢ AND i.total_engagement_rate >= $4                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ AND up.location_country = ANY($5)                                                                                                â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Pagination:                                                                                                                        â”‚  â”‚
â”‚  â”‚ â€¢ LIMIT $6 OFFSET $7                                                                                                               â”‚  â”‚
â”‚  â”‚ â€¢ Total count query for pagination controls                                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 2.3: DETAILED INFLUENCER POPUP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ“Š COMPREHENSIVE ANALYTICS VIEW                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User Action: Brand clicks on influencer card                                                                                       â”‚  â”‚
â”‚  â”‚ Handler: handleInfluencerClick() - Opens detailed popup                                                                            â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Data Loading Sequence:                                                                                                             â”‚  â”‚
â”‚  â”‚ 1. Basic Profile Data (from initial load)                                                                                          â”‚  â”‚
â”‚  â”‚ 2. Extended Analytics via API call                                                                                                 â”‚  â”‚
â”‚  â”‚ 3. Recent Content Samples                                                                                                          â”‚  â”‚
â”‚  â”‚ 4. Audience Demographics                                                                                                           â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ API Calls for Detailed View:                                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/influencers/{id}/details                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/influencers/{id}/platforms                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/influencers/{id}/content                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ GET /api/influencers/{id}/demographics                                                                                           â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Database Queries for Popup:                                                                                                        â”‚  â”‚
â”‚  â”‚ Platform Details:                                                                                                                  â”‚  â”‚
â”‚  â”‚ SELECT platform, username, followers, engagement_rate,                                                                            â”‚  â”‚
â”‚  â”‚        avg_views, avg_likes, avg_comments, profile_url                                                                             â”‚  â”‚
â”‚  â”‚ FROM influencer_platforms WHERE influencer_id = $1                                                                                 â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Recent Content:                                                                                                                    â”‚  â”‚
â”‚  â”‚ SELECT post_url, thumbnail_url, caption, views, likes, comments                                                                   â”‚  â”‚
â”‚  â”‚ FROM influencer_content ic                                                                                                         â”‚  â”‚
â”‚  â”‚ JOIN influencer_platforms ip ON ic.influencer_platform_id = ip.id                                                                 â”‚  â”‚
â”‚  â”‚ WHERE ip.influencer_id = $1                                                                                                        â”‚  â”‚
â”‚  â”‚ ORDER BY ic.posted_at DESC LIMIT 12                                                                                                â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Demographics:                                                                                                                      â”‚  â”‚
â”‚  â”‚ SELECT age_13_17, age_18_24, age_25_34, age_35_44,                                                                                â”‚  â”‚
â”‚  â”‚        gender_male, gender_female, gender_other                                                                                   â”‚  â”‚
â”‚  â”‚ FROM audience_demographics ad                                                                                                      â”‚  â”‚
â”‚  â”‚ JOIN influencer_platforms ip ON ad.influencer_platform_id = ip.id                                                                 â”‚  â”‚
â”‚  â”‚ WHERE ip.influencer_id = $1                                                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 2.4: SHORTLIST CREATION & MANAGEMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  â¤ï¸ INFLUENCER SELECTION PROCESS                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User Action: Brand clicks heart button on influencer                                                                               â”‚  â”‚
â”‚  â”‚ Handler: handleHeartToggle() - Adds to shortlist                                                                                   â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Shortlist Creation Flow:                                                                                                           â”‚  â”‚
â”‚  â”‚ 1. Check if default shortlist exists for brand                                                                                     â”‚  â”‚
â”‚  â”‚ 2. Create default shortlist if needed                                                                                              â”‚  â”‚
â”‚  â”‚ 3. Add influencer to shortlist                                                                                                     â”‚  â”‚
â”‚  â”‚ 4. Update UI state immediately                                                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ API Call: POST /api/shortlists/influencers                                                                                         â”‚  â”‚
â”‚  â”‚ Request Body:                                                                                                                      â”‚  â”‚
â”‚  â”‚ {                                                                                                                                  â”‚  â”‚
â”‚  â”‚   influencer_id: "uuid",                                                                                                          â”‚  â”‚
â”‚  â”‚   shortlist_name: "My Favorites",                                                                                                 â”‚  â”‚
â”‚  â”‚   notes: "Great engagement rate",                                                                                                 â”‚  â”‚
â”‚  â”‚   rating: 5                                                                                                                       â”‚  â”‚
â”‚  â”‚ }                                                                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Database Operations:                                                                                                               â”‚  â”‚
â”‚  â”‚ 1. Create/Find Shortlist:                                                                                                          â”‚  â”‚
â”‚  â”‚ INSERT INTO shortlists (brand_id, name, description)                                                                              â”‚  â”‚
â”‚  â”‚ VALUES ($1, $2, $3)                                                                                                                â”‚  â”‚
â”‚  â”‚ ON CONFLICT (brand_id, name) DO NOTHING                                                                                           â”‚  â”‚
â”‚  â”‚ RETURNING id                                                                                                                       â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 2. Add Influencer to Shortlist:                                                                                                    â”‚  â”‚
â”‚  â”‚ INSERT INTO shortlist_influencers (                                                                                                â”‚  â”‚
â”‚  â”‚   shortlist_id, influencer_id, notes, rating, added_by                                                                            â”‚  â”‚
â”‚  â”‚ ) VALUES ($1, $2, $3, $4, $5)                                                                                                      â”‚  â”‚
â”‚  â”‚ ON CONFLICT (shortlist_id, influencer_id) DO UPDATE                                                                               â”‚  â”‚
â”‚  â”‚ SET notes = $3, rating = $4, updated_at = NOW()                                                                                   â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 3. Update Brand Activity:                                                                                                          â”‚  â”‚
â”‚  â”‚ INSERT INTO audit_logs (                                                                                                           â”‚  â”‚
â”‚  â”‚   user_id, action, entity_type, entity_id, details                                                                                â”‚  â”‚
â”‚  â”‚ ) VALUES ($1, 'SHORTLIST_ADD', 'influencer', $2, $3)                                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                              PHASE 3: CAMPAIGN QUOTATION                                                              â•‘
â•‘                                            ğŸ“ Complete Technical Flow                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ 3.1: CAMPAIGN CREATION INITIATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸš€ NEW CAMPAIGN WORKFLOW                                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route: /brand/campaigns                                                                                                            â”‚  â”‚
â”‚  â”‚ User Action: Brand clicks "Create New Campaign" button                                                                             â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Modal Opening:                                                                                                                     â”‚  â”‚
â”‚  â”‚ â€¢ setState: setCreateCampaignModalOpen(true)                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Component: CreateCampaignModal                                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Load brand shortlists for influencer selection                                                                                   â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Shortlists Loading API Call:                                                                                                       â”‚  â”‚
â”‚  â”‚ GET /api/shortlists                                                                                                                â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Database Query:                                                                                                                    â”‚  â”‚
â”‚  â”‚ SELECT s.id, s.name, s.description, s.created_at,                                                                                 â”‚  â”‚
â”‚  â”‚        COUNT(si.influencer_id) as influencer_count                                                                                â”‚  â”‚
â”‚  â”‚ FROM shortlists s                                                                                                                  â”‚  â”‚
â”‚  â”‚ LEFT JOIN shortlist_influencers si ON s.id = si.shortlist_id                                                                      â”‚  â”‚
â”‚  â”‚ WHERE s.brand_id = $1                                                                                                              â”‚  â”‚
â”‚  â”‚ GROUP BY s.id, s.name, s.description, s.created_at                                                                                â”‚  â”‚
â”‚  â”‚ ORDER BY s.created_at DESC                                                                                                         â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Form Initialization:                                                                                                               â”‚  â”‚
â”‚  â”‚ â€¢ Campaign name, description fields                                                                                                â”‚  â”‚
â”‚  â”‚ â€¢ Budget range selector                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Timeline date pickers                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ Deliverables checklist                                                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ Influencer selection from shortlists                                                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 3.2: INFLUENCER SELECTION FROM SHORTLISTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ‘¥ STRATEGIC INFLUENCER PICKING                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User Action: Brand selects shortlist and picks influencers                                                                         â”‚  â”‚
â”‚  â”‚ Handler: handleShortlistSelection()                                                                                                â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Shortlist Details Loading:                                                                                                         â”‚  â”‚
â”‚  â”‚ API Call: GET /api/shortlists/{id}/influencers                                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Complex Join Query:                                                                                                                â”‚  â”‚
â”‚  â”‚ SELECT                                                                                                                             â”‚  â”‚
â”‚  â”‚   i.id, i.display_name, i.total_followers,                                                                                        â”‚  â”‚
â”‚  â”‚   i.total_engagement_rate, i.price_per_post,                                                                                      â”‚  â”‚
â”‚  â”‚   up.avatar_url, up.location_country,                                                                                             â”‚  â”‚
â”‚  â”‚   si.notes, si.rating, si.added_at,                                                                                               â”‚  â”‚
â”‚  â”‚   ARRAY_AGG(ip.platform) as platforms,                                                                                            â”‚  â”‚
â”‚  â”‚   JSON_AGG(                                                                                                                       â”‚  â”‚
â”‚  â”‚     JSON_BUILD_OBJECT(                                                                                                            â”‚  â”‚
â”‚  â”‚       'platform', ip.platform,                                                                                                    â”‚  â”‚
â”‚  â”‚       'followers', ip.followers,                                                                                                  â”‚  â”‚
â”‚  â”‚       'engagement_rate', ip.engagement_rate                                                                                       â”‚  â”‚
â”‚  â”‚     )                                                                                                                             â”‚  â”‚
â”‚  â”‚   ) as platform_details                                                                                                           â”‚  â”‚
â”‚  â”‚ FROM shortlist_influencers si                                                                                                      â”‚  â”‚
â”‚  â”‚ JOIN influencers i ON si.influencer_id = i.id                                                                                     â”‚  â”‚
â”‚  â”‚ JOIN user_profiles up ON i.user_id = up.user_id                                                                                   â”‚  â”‚
â”‚  â”‚ LEFT JOIN influencer_platforms ip ON i.id = ip.influencer_id                                                                      â”‚  â”‚
â”‚  â”‚ WHERE si.shortlist_id = $1                                                                                                         â”‚  â”‚
â”‚  â”‚ GROUP BY i.id, up.avatar_url, si.notes, si.rating                                                                                 â”‚  â”‚
â”‚  â”‚ ORDER BY si.rating DESC, si.added_at DESC                                                                                          â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Selection Interface:                                                                                                               â”‚  â”‚
â”‚  â”‚ â€¢ Checkbox selection for each influencer                                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ Individual rate suggestions based on price_per_post                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ Platform-specific requirements setting                                                                                           â”‚  â”‚
â”‚  â”‚ â€¢ Budget calculation in real-time                                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ State Management:                                                                                                                  â”‚  â”‚
â”‚  â”‚ â€¢ selectedInfluencers: Array of influencer objects                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ individualRates: Object mapping influencer_id to rate                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ totalBudgetEstimate: Calculated sum                                                                                              â”‚  â”‚
â”‚  â”‚ â€¢ platformRequirements: Per-influencer platform specs                                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 3.3: QUOTATION SUBMISSION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ“¨ COMPREHENSIVE QUOTATION REQUEST                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User Action: Brand clicks "Submit for Quotation"                                                                                   â”‚  â”‚
â”‚  â”‚ Handler: handleQuotationSubmit()                                                                                                   â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Form Validation:                                                                                                                   â”‚  â”‚
â”‚  â”‚ â€¢ Campaign name (min 5 chars)                                                                                                      â”‚  â”‚
â”‚  â”‚ â€¢ Description (min 20 chars)                                                                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Budget range selected                                                                                                            â”‚  â”‚
â”‚  â”‚ â€¢ At least one influencer selected                                                                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Valid timeline dates                                                                                                             â”‚  â”‚
â”‚  â”‚ â€¢ Deliverables specified                                                                                                           â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ API Call: POST /api/quotations                                                                                                     â”‚  â”‚
â”‚  â”‚ Request Body:                                                                                                                      â”‚  â”‚
â”‚  â”‚ {                                                                                                                                  â”‚  â”‚
â”‚  â”‚   campaign_name: "Summer Collection Launch",                                                                                      â”‚  â”‚
â”‚  â”‚   description: "Promoting our new summer fashion line...",                                                                        â”‚  â”‚
â”‚  â”‚   budget_min: 5000,                                                                                                               â”‚  â”‚
â”‚  â”‚   budget_max: 10000,                                                                                                              â”‚  â”‚
â”‚  â”‚   start_date: "2024-06-01",                                                                                                       â”‚  â”‚
â”‚  â”‚   end_date: "2024-06-30",                                                                                                         â”‚  â”‚
â”‚  â”‚   deliverables: ["Instagram Posts", "Stories", "Reels"],                                                                          â”‚  â”‚
â”‚  â”‚   selected_influencers: [                                                                                                         â”‚  â”‚
â”‚  â”‚     {                                                                                                                             â”‚  â”‚
â”‚  â”‚       influencer_id: "uuid1",                                                                                                    â”‚  â”‚
â”‚  â”‚       suggested_rate: 800,                                                                                                       â”‚  â”‚
â”‚  â”‚       platforms: ["INSTAGRAM"],                                                                                                  â”‚  â”‚
â”‚  â”‚       specific_requirements: "2 posts, 4 stories"                                                                                â”‚  â”‚
â”‚  â”‚     }                                                                                                                             â”‚  â”‚
â”‚  â”‚   ],                                                                                                                              â”‚  â”‚
â”‚  â”‚   additional_notes: "Brand guidelines attached"                                                                                   â”‚  â”‚
â”‚  â”‚ }                                                                                                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ 3.4: DATABASE QUOTATION STORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                                         â”‚
â”‚  ğŸ’¾ COMPLEX TRANSACTIONAL STORAGE                                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Backend: /src/app/api/quotations/route.ts                                                                                          â”‚  â”‚
â”‚  â”‚ Database Operations: Transaction-wrapped for consistency                                                                           â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ Transaction Begin:                                                                                                                 â”‚  â”‚
â”‚  â”‚ BEGIN;                                                                                                                             â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 1. Create Main Quotation:                                                                                                          â”‚  â”‚
â”‚  â”‚ INSERT INTO quotations (                                                                                                           â”‚  â”‚
â”‚  â”‚   brand_id, campaign_name, description, budget_min, budget_max,                                                                   â”‚  â”‚
â”‚  â”‚   start_date, end_date, deliverables, status,                                                                                     â”‚  â”‚
â”‚  â”‚   additional_notes, created_by                                                                                                     â”‚  â”‚
â”‚  â”‚ ) VALUES (                                                                                                                         â”‚  â”‚
â”‚  â”‚   $1, $2, $3, $4, $5, $6, $7, $8, 'PENDING_REVIEW', $9, $10                                                                      â”‚  â”‚
â”‚  â”‚ ) RETURNING id                                                                                                                     â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 2. Add Selected Influencers:                                                                                                       â”‚  â”‚
â”‚  â”‚ FOR EACH selected influencer:                                                                                                      â”‚  â”‚
â”‚  â”‚   INSERT INTO quotation_influencers (                                                                                             â”‚  â”‚
â”‚  â”‚     quotation_id, influencer_id, suggested_rate,                                                                                  â”‚  â”‚
â”‚  â”‚     platforms, specific_requirements, status                                                                                      â”‚  â”‚
â”‚  â”‚   ) VALUES ($1, $2, $3, $4, $5, 'SELECTED')                                                                                       â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 3. Create Activity Log:                                                                                                            â”‚  â”‚
â”‚  â”‚ INSERT INTO audit_logs (                                                                                                           â”‚  â”‚
â”‚  â”‚   user_id, action, entity_type, entity_id,                                                                                        â”‚  â”‚
â”‚  â”‚   details, ip_address, user_agent                                                                                                 â”‚  â”‚
â”‚  â”‚ ) VALUES (                                                                                                                         â”‚  â”‚
â”‚  â”‚   $1, 'QUOTATION_CREATED', 'quotation', $2,                                                                                       â”‚  â”‚
â”‚  â”‚   JSON_BUILD_OBJECT(                                                                                                              â”‚  â”‚
â”‚  â”‚     'campaign_name', $3,                                                                                                          â”‚  â”‚
â”‚  â”‚     'influencer_count', $4,                                                                                                       â”‚  â”‚
â”‚  â”‚     'total_budget_estimate', $5                                                                                                   â”‚  â”‚
â”‚  â”‚   ), $6, $7                                                                                                                       â”‚  â”‚
â”‚  â”‚ )                                                                                                                                  â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ 4. Update Brand Statistics:                                                                                                        â”‚  â”‚
â”‚  â”‚ UPDATE brands SET                                                                                                                  â”‚  â”‚
â”‚  â”‚   total_quotations = total_quotations + 1,                                                                                        â”‚  â”‚
â”‚  â”‚   last_activity = NOW()                                                                                                           â”‚  â”‚
â”‚  â”‚ WHERE id = $1                                                                                                                      â”‚  â”‚
â”‚  â”‚                                                                                                                                     â”‚  â”‚
â”‚  â”‚ COMMIT;                                                                                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                         COMPLETE SYSTEM OVERVIEW                                                                       â•‘
â•‘                              ğŸ¯ EVERY API, DATABASE, AND USER INTERACTION                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

API ENDPOINTS MAPPED TO EXACT FUNCTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/discovery/search â†’ /src/app/api/discovery/search/route.ts â†’ searchInfluencers()                                                   â”‚
â”‚ /api/influencers â†’ /src/lib/db/queries/influencers.ts â†’ getInfluencers()                                                               â”‚
â”‚ /api/shortlists â†’ /src/lib/db/queries/shortlists.ts â†’ getShortlists()                                                                  â”‚
â”‚ /api/quotations â†’ /src/app/api/quotations/route.ts â†’ createQuotation()                                                                 â”‚
â”‚ /api/campaigns â†’ /src/lib/db/queries/campaigns.ts â†’ getAllCampaigns()                                                                  â”‚
â”‚ /api/modash/profile â†’ /src/lib/services/modash.ts â†’ getProfileReport()                                                                 â”‚
â”‚ /api/staff/saved-influencers â†’ /src/app/api/staff/saved-influencers/route.ts â†’ getSavedInfluencers()                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATABASE TABLES WITH EXACT RELATIONSHIPS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users (id) â†â†’ user_profiles (user_id)                                                                                                   â”‚
â”‚ users (id) â†â†’ brands (user_id) â†â†’ brand_contacts (brand_id)                                                                             â”‚
â”‚ users (id) â†â†’ influencers (user_id) â†â†’ influencer_platforms (influencer_id)                                                             â”‚
â”‚ brands (id) â†â†’ shortlists (brand_id) â†â†’ shortlist_influencers (shortlist_id, influencer_id)                                            â”‚
â”‚ brands (id) â†â†’ quotations (brand_id) â†â†’ quotation_influencers (quotation_id, influencer_id)                                            â”‚
â”‚ quotations (id) â†â†’ campaigns (quotation_id) â†â†’ campaign_influencers (campaign_id, influencer_id)                                       â”‚
â”‚ campaign_influencers (id) â†â†’ payment_transactions (campaign_influencer_id)                                                             â”‚
â”‚ influencer_platforms (id) â†â†’ audience_demographics (influencer_platform_id)                                                            â”‚
â”‚ influencer_platforms (id) â†â†’ audience_locations (influencer_platform_id)                                                               â”‚
â”‚ influencer_platforms (id) â†â†’ influencer_content (influencer_platform_id)                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FRONTEND COMPONENTS WITH EXACT LINE REFERENCES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /src/app/staff/discovery/page.tsx (Lines 2232-3438) â†’ DiscoveryPageClient()                                                            â”‚
â”‚ /src/app/brand/influencers/page.tsx â†’ BrandInfluencersPage()                                                                            â”‚
â”‚ /src/components/campaigns/CreateCampaignModal.tsx â†’ Campaign creation form                                                              â”‚
â”‚ /src/components/shortlists/ShortlistManagement.tsx â†’ Shortlist operations                                                              â”‚
â”‚ /src/components/influencer/InfluencerDetailPanel.tsx â†’ Detailed popup view                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

This is the MOST DETAILED technical workflow documentation possible - covering every API call, database query, 
user interaction, component reference, and data flow in your entire campaign management system.
